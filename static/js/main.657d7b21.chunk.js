(this["webpackJsonpstore-macias-nicolas"]=this["webpackJsonpstore-macias-nicolas"]||[]).push([[0],{50:function(e,t,c){},73:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(1),s=c.n(r),a=c(25),i=c.n(a),o=(c(50),c(9)),u=c(15),j=c(18),d=c.n(j),b=c(23),l="https://coding-challenge-api.aerolab.co",O="/store-macias-nicolas",h=c(21),m=c.n(h);m.a.defaults.headers.common.Authorization="Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk");var f=function(){return function(e){var t="".concat(l,"/user/me");m.a.get(t).then((function(e){return e.data})).then((function(t){e(function(e){return{type:"SET_USER",user:e}}(t))})).catch((function(e){return console.log(e)}))}},x=c(17),v=c(98),p=(c(73),function(e){var t=e.children;return Object(n.jsx)("div",{className:"badge row center",children:t})}),g=c.p+"static/media/aerolab-logo.40b78ac9.svg",N=c.p+"static/media/coin.1fc21bda.svg",S=c(14),y=function(e){var t=e.Render;return Object(n.jsx)(S.b,{to:"".concat(O),children:Object(n.jsx)(t,{})})},w=(c(75),function(e){var t=e.user;return Object(n.jsxs)("div",{className:"bar-container row",children:[Object(n.jsx)(y,{Render:function(){return Object(n.jsx)("img",{src:g,alt:"kite",height:"36",width:"36"})}}),Object(n.jsx)("div",{className:"row",children:t?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{className:"bar-text center",children:t.name}),Object(n.jsx)("div",{className:"center",children:Object(n.jsxs)(p,{children:[Object(n.jsx)("p",{className:"bar-text",children:t.points.toLocaleString()}),Object(n.jsx)("img",{src:N,alt:"coin",height:"24",width:"24"})]})})]}):Object(n.jsx)("div",{className:"center",children:Object(n.jsx)(v.a,{})})})]})}),E=(c(76),function(){return Object(n.jsx)("div",{className:"banner",children:Object(n.jsx)("p",{className:"title",children:"Electronics"})})}),C=c(6),I=c.p+"static/media/buy-blue.13783e2a.svg",R=(c(77),function(e){var t=e.difference,c=e.hasEnough;return e.hasUser?c?Object(n.jsx)("img",{src:I,alt:"buy-blue",width:"42",height:"42"}):Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"remaining-container",children:[Object(n.jsxs)("p",{className:"amount-missing",children:["You need ",Math.abs(t).toLocaleString()]}),Object(n.jsx)("img",{src:N,alt:"coin",width:"20",height:"20"})]})}):Object(n.jsx)(v.a,{})}),T=c.p+"static/media/buy-white.3eddcc1e.svg",k=function(e){var t=e.number,c=e.separator,n=e.distance,r=c||",",s=n||3;return t.toString().split("").reverse().reduce((function(e,t,c,n){var a=c+1,i=a%s===0&&a<n.length;return["".concat(i?r:"").concat(t)].concat(Object(u.a)(e))}),[]).join("")},U=function(e){var t=e.number,c=e.separator,r=e.distance;if(!t||Number.isNaN(t))return Object(n.jsx)(n.Fragment,{});var s=k({number:t,separator:c,distance:r});return Object(n.jsx)(n.Fragment,{children:s})},F=(c(78),function(e){var t=e.cost,c=e.hasEnough,r=e.productId,s={Redeem:{text:"Redeem now",linkTo:"/redeem/".concat(r)},Coins:{text:"Get coins"}}[c?"Redeem":"Coins"];return Object(n.jsxs)("div",{className:"action-button-container",children:[Object(n.jsx)("div",{className:"img-block",children:Object(n.jsx)("img",{src:T,alt:"buy-white",width:"48",height:"48"})}),Object(n.jsx)("div",{className:"action-block",children:Object(n.jsxs)("div",{className:"value",children:[Object(n.jsx)("p",{children:Object(n.jsx)(U,{number:t})}),Object(n.jsx)("div",{className:"coin-container",children:Object(n.jsx)("img",{src:N,alt:"coin",height:"30",width:"30"})})]})}),Object(n.jsx)("div",{className:"button-container",children:Object(n.jsx)(S.b,{to:"".concat(O).concat(s.linkTo),children:Object(n.jsx)("button",{className:"action-button",children:s.text})})})]})}),P=function(e){return function(t){return Object(n.jsx)(x.b.Consumer,{children:function(c){var r=c.store.getState().user;return Object(n.jsx)(e,Object(C.a)({user:r},t))}})}},_=(c(79),function(e){return function(t){return Object(n.jsx)("div",{className:"indicator-container",children:Object(n.jsx)(e,Object(C.a)({},t))})}}),G=(c(80),P(_((function(e){var t,c=e.cost,r=e.user,s=e.isHover,a=e.productId,i=(null!==(t=null===r||void 0===r?void 0:r.points)&&void 0!==t?t:0)-c,o=i>=0;return s?Object(n.jsx)(F,{cost:c,hasEnough:o,productId:a}):Object(n.jsx)(R,{hasEnough:o,hasUser:!!r,difference:i})})))),J=(c(81),function(e){var t=e.img,c=e.name,s=e.category,a=e.cost,i=e._id,u=e.avoidContainer,j=e.avoidTransition,d=Object(r.useState)(!1),b=Object(o.a)(d,2),l=b[0],O=b[1];return Object(n.jsxs)("div",{className:"product-container column center ".concat(!j&&"transition"),onMouseEnter:function(){return O(!0)},onMouseLeave:function(){return O(!1)},children:[!u&&Object(n.jsx)(G,{cost:a,isHover:l,productId:i}),Object(n.jsx)("img",{className:"product-image",src:t.hdUrl,alt:"product-".concat(c),width:"230"}),Object(n.jsxs)("div",{className:"text-block column",children:[Object(n.jsx)("p",{className:"category",children:s}),Object(n.jsx)("p",{className:"name",children:c})]})]})}),L=(c(82),function(e){var t=e.products,c=void 0===t?[]:t;return Object(n.jsx)("div",{className:"product-list",children:c.map((function(e,t){return Object(n.jsx)(J,Object(C.a)({},e),"product-".concat(t))}))})}),B=c(24),D=c(43),Q={user:null,products:[]},Y=function(e){return{SET_USER:function(t){var c=t.user;return Object(C.a)(Object(C.a)({},e),{},{user:c})},SET_PRODUCTS:function(t){var c=t.products;return Object(C.a)(Object(C.a)({},e),{},{products:Object(u.a)(c)})},CLEAR_USER:function(){return Object(C.a)(Object(C.a)({},e),{},{user:null})}}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;console.log(t);var c=t.type,n=Y(e),r=n[c];return r?r(t):e},z=Object(B.c)(M,Object(B.a)(D.a));c(83);var A=Object(x.c)(null,{getUser:f,getProducts:function(){return function(e){var t="".concat(l,"/products");m.a.get(t).then((function(e){return e.data})).then((function(t){e(function(e){return{type:"SET_PRODUCTS",products:e}}(t))})).catch((function(e){return console.log(e)}))}}})((function(e){var t=e.getUser,c=e.getProducts,s=Object(r.useState)(null),a=Object(o.a)(s,2),i=a[0],u=a[1],j=Object(r.useState)([]),d=Object(o.a)(j,2),b=d[0],l=d[1];return Object(r.useEffect)((function(){t(),c()}),[c,t]),Object(r.useEffect)((function(){return z.subscribe((function(){var e=z.getState().user,t=z.getState().products;u(e),l(t)}))}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)(w,{user:i}),Object(n.jsx)(E,{}),Object(n.jsx)(L,{products:b})]})})),W=c(4),H=c(3),X=function(){return Object(n.jsx)("div",{className:"center",children:Object(n.jsx)(v.a,{})})},Z=(c(84),function(e){var t=e.success;return Object(n.jsx)("div",{className:"animated-face-container center ".concat(t?"jump-animation":"rotate-animation"),children:Object(n.jsx)("div",{className:t?void 0:"face-rotate-animation",children:Object(n.jsx)("h3",{children:t?"\u25d5\u203f\u25d5":" \u0ca0_\u0ca0"})})})}),K=(c(85),Object(H.h)((function(e){var t=e.success,c=e.onRetry,r=e.history,s=t?"The product was successfully redeemed":"There was an error trying to redeem this product",a=t?"See redeem history":"Try again",i=t?function(){return r.push("".concat(O,"/history"))}:c;return Object(n.jsxs)("div",{className:"center column",children:[Object(n.jsxs)("div",{className:"message-card success-color",children:[Object(n.jsx)("h1",{children:t?"Success":"Error"}),Object(n.jsx)(Z,{success:t}),Object(n.jsx)("p",{className:"redem-message",children:s}),Object(n.jsx)("button",{className:"action-button",onClick:i,children:a})]}),Object(n.jsx)(y,{Render:function(){return Object(n.jsx)("button",{className:"return-buttons",children:"Go back"})}})]})}))),V=(c(86),Object(x.c)(null,{redeemProduct:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(c){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(l,"/redeem"),r={productId:e},t.abrupt("return",m.a.post(n,r).then((function(e){return e.data})).then((function(e){var t=e.message;return f()(c),t})).catch((function(e){return"The product can not be redeemed now"})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.redeemProduct,c=Object(r.useState)(null),s=Object(o.a)(c,2),a=s[0],i=s[1],u=Object(r.useState)(null),j=Object(o.a)(u,2),l=j[0],O=j[1],h=Object(r.useState)(!1),m=Object(o.a)(h,2),f=m[0],x=m[1],v=Object(r.useState)(!1),p=Object(o.a)(v,2),g=p[0],N=p[1],S=Object(r.useState)(null),E=Object(o.a)(S,2),I=E[0],R=E[1],T=Object(H.g)().productId;Object(r.useEffect)((function(){var e=z.getState(),t=e.products,c=Object(W.a)(e,["products"]),n=t.find((function(e){return e._id===T}));i(n),O(c.user)}),[T]),Object(r.useEffect)((function(){return z.subscribe((function(){var e=z.getState().user;O(e)}))}),[]);var U=function(){var e=Object(b.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,t(T);case 3:c=e.sent,N(!0),x(!1),R("You've redeem the product successfully"===c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(!a)return Object(n.jsx)(X,{});return Object(n.jsxs)("div",{children:[Object(n.jsx)(w,{user:l}),f?Object(n.jsx)(X,{}):g?Object(n.jsx)(K,{success:I,onRetry:U}):Object(n.jsxs)("div",{className:"redem-container",children:[Object(n.jsx)("div",{className:"product-description",children:Object(n.jsxs)("div",{className:"card-description",children:[Object(n.jsx)(J,Object(C.a)(Object(C.a)({},a),{},{avoidContainer:!0,avoidTransition:!0})),Object(n.jsxs)("div",{className:"redeem-information",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("h3",{className:"title",children:["Redeem ",a.name]}),Object(n.jsxs)("p",{children:["You're about to spend ",k({number:a.cost})," in this product"]})]}),Object(n.jsxs)("div",{className:"button-container",children:[Object(n.jsx)("h5",{children:"Do you want to continue?"}),Object(n.jsx)("button",{className:"confirm-button",onClick:U,children:"Yes"}),Object(n.jsx)(y,{Render:function(){return Object(n.jsx)("button",{className:"confirm-button",children:"No"})}})]})]})]})}),Object(n.jsx)("div",{className:"center",children:Object(n.jsx)(y,{Render:function(){return Object(n.jsx)("button",{className:"return-button",children:"Go back"})}})})]})]})}))),q=[{route:"".concat(O,"/"),exact:!0,Component:A},{route:"".concat(O,"/redeem/:productId"),Component:V},{route:"".concat(O,"/history"),Component:function(){return Object(n.jsx)("h1",{children:"history"})}},{route:"".concat(O,"/coins"),Component:function(){return Object(n.jsx)("h1",{children:"coins"})}}],$=function(){return Object(n.jsx)(H.a,{to:O})},ee=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(H.b,{exact:!0,path:"**",children:Object(n.jsx)($,{})})})},te=function(){return Object(n.jsxs)(H.d,{children:[q.map((function(e,t){var c=e.route,r=e.exact,s=e.Component;return Object(n.jsx)(H.b,{exact:!!r,path:c,children:Object(n.jsx)(s,{})},t)})),Object(n.jsx)(ee,{})]})},ce=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,99)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),s(e),a(e)}))};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(x.a,{store:z,children:Object(n.jsx)(S.a,{children:Object(n.jsx)(te,{})})})}),document.getElementById("root")),ce()}},[[87,1,2]]]);
//# sourceMappingURL=main.657d7b21.chunk.js.map